(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();let d=null,f;const l=document.getElementById("themeBtn");function h(e,t,s=30){const r=new Date;r.setTime(r.getTime()+s*24*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};expires=${r.toUTCString()};path=/`}function p(e){const t=`${e}=`,s=document.cookie.split(";");for(let r=0;r<s.length;r++){let n=s[r];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return decodeURIComponent(n.substring(t.length,n.length))}return null}function T(e){const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const s=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-s.getTime())/864e5-3+(s.getDay()+6)%7)/7)}function j(){const e=new Date,t=new Date((d==null?void 0:d.startDate)||"2025-09-08"),s=T(t);return(T(e)-s+1)%2!==0?"num":"den"}function N(e){const t=new Date(e),s=t.getDay(),r=t.getDate()-s+(s===0?-6:1),n=new Date(t.setDate(r));n.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());const o=new Date(n);return o.setDate(o.getDate()+4),{start:n,end:o}}async function B(){try{const e=await fetch("./schedule.json");if(!e.ok)throw new Error("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥");return d=await e.json(),d}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É:",e),document.getElementById("loading").innerHTML=`
      <div style="color: #d32f2f; text-align: center;">
        <h3>‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
        <p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ —Ä–æ–∑–∫–ª–∞–¥—É. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.</p>
      </div>
    `,null}}function A(){const e=document.getElementById("navigation"),t=Object.keys(d.schedule);e.innerHTML=t.map(s=>{const r=d.schedule[s].name,n=M(r);return`<a href="#" onclick="scrollToDay('${s}'); return false;" 
               data-full="${r}" data-short="${n}">${r}</a>`}).join("")}function M(e){return{–ü–æ–Ω–µ–¥—ñ–ª–æ–∫:"–ü–ù",–í—ñ–≤—Ç–æ—Ä–æ–∫:"–í–¢",–°–µ—Ä–µ–¥–∞:"–°–†",–ß–µ—Ç–≤–µ—Ä:"–ß–¢","–ü'—è—Ç–Ω–∏—Ü—è":"–ü–¢"}[e]||e.substring(0,2).toUpperCase()}function H(){const e=document.getElementById("schedule-container"),t=Object.keys(d.schedule);e.innerHTML=t.map(s=>{const r=d.schedule[s];return`
      <section class="day" id="${s}">
        <h2>${r.name}</h2>
        <div class="cards">
          ${r.lessons.map(n=>q(n)).join("")}
        </div>
      </section>
    `}).join("")}function q(e){const t=e.type==="empty"||!e.subject,s=t?"card empty":`card ${e.type}`;if(t)return`
      <article class="${s}">
        <h3>${e.number} –ø–∞—Ä–∞</h3>
        <p>–ù–µ–º–∞—î</p>
      </article>
    `;let r="";e.subgroups&&e.subgroups.length>0&&(r=e.subgroups.map(o=>{const a=W(o),c=O(o);return`
        <div class="subgroup ${a}">
          <p class="subgroup-label ${o.group==="sub2"?"sub2":"sub1"}">${c}</p>
          <p><b>${o.subject}</b> (${L(o.type)})</p>
          <p class="teacher-room">${o.teacher}${o.room?", "+o.room:""}</p>
        </div>
      `}).join(""));const n=e.subgroups.length===0?`
    <p><b>${e.subject}</b> (${L(e.type)})</p>
    <p class="teacher-room">${e.teacher}${e.room?", "+e.room:""}</p>
  `:"";return`
    <article class="${s}">
      <h3>${e.number} –ø–∞—Ä–∞</h3>
      ${n}
      ${r}
      <p class="time">${e.time}</p>
    </article>
  `}function W(e){let t=[];return(e.weeks==="num"||e.weeks==="den")&&t.push("numden",e.weeks),(e.group==="sub1"||e.group==="sub2")&&t.push(e.group),t.join(" ")}function O(e){let t="";return e.group==="sub1"?t="–ü—ñ–¥–≥—Ä—É–ø–∞ 1":e.group==="sub2"?t="–ü—ñ–¥–≥—Ä—É–ø–∞ 2":e.group==="all"&&(t=""),e.weeks==="num"?t+=t?" (–ß–∏—Å–µ–ª—å–Ω–∏–∫)":"–ß–∏—Å–µ–ª—å–Ω–∏–∫":e.weeks==="den"&&(t+=t?" (–ó–Ω–∞–º–µ–Ω–Ω–∏–∫)":"–ó–Ω–∞–º–µ–Ω–Ω–∏–∫"),t}function L(e){return{lecture:"–õ–µ–∫—Ü—ñ—è",practical:"–ü—Ä–∞–∫—Ç–∏—á–Ω–∞",lab:"–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞",mixed:"–ó–º—ñ—à–∞–Ω–∞"}[e]||e}function F(){const e=document.getElementById("subgroupFilter").value,t=document.getElementById("showAllWeeks").checked,s=document.getElementById("hideEmptyLessons").checked,r=j();document.querySelectorAll(".card").forEach(a=>{const c=a.querySelectorAll(".subgroup");let i=!1;if(c.length===0){const u=a.classList.contains("empty");s&&u?a.style.display="none":a.style.display="block"}else c.forEach(u=>u.style.display="none"),c.forEach(u=>{let m=!0;if(e!=="all"){const y=u.classList.contains("sub1")?"sub1":u.classList.contains("sub2")?"sub2":"all";y!=="all"&&y!==e&&(m=!1)}if(!t){const y=u.classList.contains("num")?"num":u.classList.contains("den")?"den":"all";y!=="all"&&y!==r&&(m=!1)}u.style.display=m?"block":"none",m&&(i=!0)}),i?(a.classList.remove("empty"),a.style.display="block"):(a.classList.add("empty"),a.style.display=s?"none":"block")}),document.querySelectorAll(".num-label, .den-label").forEach(a=>{a.style.display=t?"":"none"}),P(),I(),V(),C()}function P(){const e=document.getElementById("showAllWeeks").checked,t=document.getElementById("currentWeekInfo");if(e)t.innerHTML="";else{const s=j(),r=N(new Date),n=s==="num"?"–ß–∏—Å–µ–ª—å–Ω–∏–∫":"–ó–Ω–∞–º–µ–Ω–Ω–∏–∫";t.innerHTML=`${n} (${r.start.toLocaleDateString("uk-UA")} ‚Äì ${r.end.toLocaleDateString("uk-UA")})`}}function D(){const e=window.innerWidth<=600;document.querySelectorAll("nav a").forEach(s=>{e?s.textContent=s.dataset.short:s.textContent=s.dataset.full})}function U(){const e=document.body.classList.toggle("dark-mode");h("darkMode",e?"true":"false")}function z(){const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date().getDay(),s=e[t];document.querySelectorAll(".day").forEach(o=>{o.classList.remove("today"),o.id===s&&(o.classList.add("today"),o.scrollIntoView({behavior:"smooth",block:"start"}))}),document.querySelectorAll("nav a").forEach(o=>{var c;o.classList.remove("active-day");const a=(c=d==null?void 0:d.schedule[s])==null?void 0:c.name;o.dataset&&o.dataset.full===a&&o.classList.add("active-day")})}function I(){const e=new Date,t=e.getHours()*60+e.getMinutes(),s=document.querySelector(".day.today");if(!s)return;const r=s.querySelectorAll(".card:not(.empty)");let n=null,o=null,a=1/0;r.forEach(c=>{if(c.style.display==="none")return;const i=c.querySelector(".time");if(!i||!i.textContent)return;const u=i.textContent,[m,y]=u.split(" ‚Äì ");if(!m||!y)return;const[E,k]=m.split(":").map(Number),[v,S]=y.split(":").map(Number);if(isNaN(E)||isNaN(k)||isNaN(v)||isNaN(S))return;const b=E*60+k,x=v*60+S;if(t>=b&&t<x){c.classList.add("current"),c.classList.remove("upcoming"),n=c;return}if(b>t){const $=b-t;$<a&&(a=$,o=c)}}),r.forEach(c=>{c.classList.remove("current","upcoming")}),n&&n.classList.add("current"),o&&a<=15&&o.classList.add("upcoming")}function R(){const e=document.querySelector(".day.today");if(!e)return[];const t=e.querySelectorAll(".card:not(.empty)"),s=[];return t.forEach(r=>{if(r.style.display==="none")return;const n=r.querySelector(".time");if(!n||!n.textContent)return;const[o,a]=n.textContent.split(" ‚Äì ");if(!o||!a)return;const[c,i]=o.split(":").map(Number),[u,m]=a.split(":").map(Number);[c,i,u,m].some(y=>Number.isNaN(y))||s.push({start:c*60+i,end:u*60+m})}),s.sort((r,n)=>r.start-n.start),s}function w(){if(!l||!l.classList.contains("expanded"))return;const e=new Date,t=e.getHours()*60+e.getMinutes(),s=R();let r=null,n=1/0,o=null;s.forEach(({start:a,end:c})=>{if(t>=a&&t<c)r={start:a,end:c},o=c-t;else if(a>t){const i=a-t;i<n&&(n=i)}}),l.className="theme-toggle expanded",r?(l.classList.add("green"),l.textContent=`${o}—Ö–≤`):n!==1/0?(l.classList.add("yellow"),l.textContent=`${n}—Ö–≤`):(l.classList.add("purple"),l.textContent=document.body.classList.contains("dark-mode")?"‚òÄÔ∏è":"üåô")}function g(){navigator.vibrate&&navigator.vibrate(50)}l&&l.addEventListener("click",()=>{l.classList.contains("expanded")?(U(),w(),g(),clearTimeout(f),f=setTimeout(()=>{l.classList.remove("expanded","green","yellow","purple"),l.textContent="",g()},2e3)):(l.classList.add("expanded"),w(),g(),clearTimeout(f),f=setTimeout(()=>{l.classList.remove("expanded","green","yellow","purple"),l.textContent="",g()},3e3))});function Y(){p("darkMode")==="true"&&document.body.classList.add("dark-mode");const t=p("subgroupFilter");t&&(document.getElementById("subgroupFilter").value=t),p("showAllWeeks")==="true"&&(document.getElementById("showAllWeeks").checked=!0),p("hideEmptyLessons")==="true"&&(document.getElementById("hideEmptyLessons").checked=!0)}function V(){const e=document.getElementById("subgroupFilter").value,t=document.getElementById("showAllWeeks").checked,s=document.getElementById("hideEmptyLessons").checked;h("subgroupFilter",e),h("showAllWeeks",t?"true":"false"),h("hideEmptyLessons",s?"true":"false")}function C(){if(!d)return;const e=Q();document.getElementById("totalLessons").textContent=e.totalLessons,document.getElementById("totalSubjects").textContent=e.subjects.size,document.getElementById("totalTeachers").textContent=e.teachers.size,document.getElementById("busyDays").textContent=e.busyDays;const t=document.getElementById("subjectsBreakdown");t.innerHTML=Array.from(e.subjectTypes.entries()).map(([s,r])=>`
      <div class="subject-item">
        <div class="subject-name">${s}</div>
        <div class="subject-types">${Array.from(r).map(L).join(", ")}</div>
      </div>
    `).join("")}function Q(){const e=new Set,t=new Set,s=new Map;let r=0,n=0;return Object.values(d.schedule).forEach(o=>{let a=!1;o.lessons.forEach(c=>{c.type!=="empty"&&c.subject&&(r++,a=!0,e.add(c.subject),c.teacher&&t.add(c.teacher),s.has(c.subject)||s.set(c.subject,new Set),s.get(c.subject).add(c.type),c.subgroups.forEach(i=>{i.subject&&(e.add(i.subject),i.teacher&&t.add(i.teacher),s.has(i.subject)||s.set(i.subject,new Set),s.get(i.subject).add(i.type))}))}),a&&n++}),{totalLessons:r,subjects:e,teachers:t,subjectTypes:s,busyDays:n}}async function G(){const e=await B();e&&(document.getElementById("schedule-title").textContent=`–†–æ–∑–∫–ª–∞–¥ –∑–∞–Ω—è—Ç—å (${e.group}, ${e.semester})`,A(),H(),Y(),F(),z(),D(),C(),document.getElementById("loading").style.display="none",document.getElementById("schedule-container").style.display="block")}document.addEventListener("DOMContentLoaded",G);setInterval(()=>{I(),w()},6e4);window.addEventListener("resize",D);
